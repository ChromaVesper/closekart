import{g as f,r as l,d as N,j as e,n as x,L as m,M as v}from"./index-CA6ijpuF.js";import{L as w}from"./loader-CzdKrhQ5.js";import{P as g}from"./package-DGNobxLg.js";import{X as b}from"./x-circle-CD-pE0Qa.js";import{C as p}from"./check-circle-CTGjSbZG.js";import{C as S}from"./clock-D0TjOpSP.js";const h={pending:{label:"Pending",color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200",icon:S},accepted:{label:"Accepted",color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200",icon:p},delivered:{label:"Delivered",color:"text-green-600",bg:"bg-green-50",border:"border-green-200",icon:p},cancelled:{label:"Cancelled",color:"text-red-500",bg:"bg-red-50",border:"border-red-200",icon:b},declined:{label:"Declined",color:"text-red-500",bg:"bg-red-50",border:"border-red-200",icon:b}},k=({status:a})=>{const t=h[a]||h.pending,n=t.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold px-2.5 py-1 rounded-full border ${t.color} ${t.bg} ${t.border}`,children:[e.jsx(n,{size:11})," ",t.label]})},E=()=>{const{user:a}=f(),[t,n]=l.useState([]),[c,u]=l.useState(!0),[i,y]=l.useState("");return l.useEffect(()=>{a&&N.get("/orders/my").then(s=>n(s.data)).catch(()=>y("Failed to load orders.")).finally(()=>u(!1))},[a]),a?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(x,{size:24,className:"text-blue-600"})," My Orders"]}),c&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(w,{size:28,className:"animate-spin text-blue-500"})}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-4 text-sm",children:i}),!c&&!i&&t.length===0&&e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(g,{size:48,className:"mx-auto mb-4 text-gray-200"}),e.jsx("p",{className:"font-semibold text-gray-500",children:"No orders yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Your placed orders will appear here."}),e.jsx(m,{to:"/",className:"mt-4 inline-block bg-blue-600 text-white px-5 py-2 rounded-xl text-sm font-semibold hover:bg-blue-700 transition",children:"Start Shopping"})]}),e.jsx("div",{className:"space-y-4",children:t.map(s=>{var d,o;return e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-900 text-sm",children:["Order #",s._id.slice(-6).toUpperCase()]}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),e.jsx(k,{status:s.status})]}),e.jsxs("div",{className:"space-y-2",children:[(d=s.items)==null?void 0:d.slice(0,3).map((r,j)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center shrink-0",children:r.image?e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover rounded-lg"}):e.jsx(g,{size:14,className:"text-gray-400"})}),e.jsx("span",{className:"flex-1 text-gray-700 font-medium truncate",children:r.name||r.productName}),e.jsxs("span",{className:"text-gray-500 text-xs shrink-0",children:["×",r.quantity]}),e.jsxs("span",{className:"text-gray-800 font-semibold text-xs shrink-0",children:["₹",r.price]})]},j)),((o=s.items)==null?void 0:o.length)>3&&e.jsxs("p",{className:"text-xs text-gray-400",children:["+",s.items.length-3," more items"]})]}),s.deliveryAddress&&e.jsxs("div",{className:"bg-gray-50 rounded-xl px-3 py-2 text-xs text-gray-500 flex items-start gap-2",children:[e.jsx(v,{size:12,className:"text-gray-400 shrink-0 mt-0.5"}),e.jsx("span",{className:"line-clamp-2",children:s.deliveryAddress.fullAddress||s.deliveryAddress})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Total"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["₹",s.totalAmount||s.total||"—"]})]})]},s._id)})})]}):e.jsxs("div",{className:"max-w-lg mx-auto text-center py-16",children:[e.jsx(x,{size:48,className:"mx-auto mb-4 text-gray-200"}),e.jsx("p",{className:"font-semibold text-gray-600",children:"Sign in to see your orders"}),e.jsx(m,{to:"/login",className:"mt-4 inline-block bg-blue-600 text-white px-6 py-2.5 rounded-xl text-sm font-semibold hover:bg-blue-700 transition",children:"Sign In"})]})};export{E as default};
