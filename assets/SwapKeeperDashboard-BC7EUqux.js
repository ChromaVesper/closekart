const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ShopMap-B0uPUrv-.js","assets/index-BndugRKt.js","assets/index-B3kFhi2N.css","assets/TileLayer-BTZ4TFOX.js"])))=>i.map(i=>d[i]);
import{c as y,a as A,r as s,d as C,j as e,M as u,m as O,L as n,_ as P}from"./index-BndugRKt.js";import{g as E}from"./swapKeeperApi-D_dnBnJD.js";import{P as g}from"./package-BBUIsOqi.js";import{S as j}from"./shopping-bag-BMh4z_ph.js";import{C as I}from"./clock-BNVFAVxX.js";import{C as U}from"./check-circle-iuPC4Hmm.js";import{S as R}from"./sliders-horizontal-i9R8LobI.js";import{M as T}from"./map-COgCjQo2.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$=s.lazy(()=>P(()=>import("./ShopMap-B0uPUrv-.js"),__vite__mapDeps([0,1,2,3]))),K=[{label:"1 km",value:1e3},{label:"3 km",value:3e3},{label:"5 km",value:5e3},{label:"10 km",value:1e4},{label:"20 km",value:2e4}],q=({label:t,value:l,icon:o,color:c,bg:x,to:m})=>e.jsxs(n,{to:m,className:"group relative flex flex-col justify-between p-6 rounded-2xl shadow-sm border border-gray-100 bg-white hover:shadow-md transition-all overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${x} ${c} p-3 rounded-xl`,children:e.jsx(o,{size:22})}),e.jsx("span",{className:"text-gray-400 group-hover:text-indigo-500 transition-colors",children:e.jsx(D,{size:18})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:l}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:t})]})]}),Y=()=>{const{coords:t,locationName:l}=A(),[o,c]=s.useState(null),[x,m]=s.useState(!0),[p,f]=s.useState(null),[a,h]=s.useState(!1),[i,v]=s.useState(5e3),[N,w]=s.useState([]),[k,b]=s.useState(!1);s.useEffect(()=>{E().then(c).catch(()=>f("Failed to load dashboard")).finally(()=>m(!1))},[]),s.useEffect(()=>{!a||!t||(b(!0),C.get("/shops",{params:{lat:t.latitude,lng:t.longitude,radius:i}}).then(r=>w(r.data)).catch(console.error).finally(()=>b(!1)))},[a,t,i]);const S=[{label:"Total Items",key:"totalItems",icon:g,color:"text-indigo-600",bg:"bg-indigo-100/80",to:"/swapkeeper/items"},{label:"Total Orders",key:"totalOrders",icon:j,color:"text-emerald-600",bg:"bg-emerald-100/80",to:"/swapkeeper/orders"},{label:"Pending Orders",key:"pendingOrders",icon:I,color:"text-amber-600",bg:"bg-amber-100/80",to:"/swapkeeper/orders"},{label:"Accepted",key:"acceptedOrders",icon:U,color:"text-blue-600",bg:"bg-blue-100/80",to:"/swapkeeper/orders"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ","Keeper"," ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Here's what's happening with your store today."})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-indigo-50 border border-indigo-100 text-indigo-700 px-4 py-2 rounded-xl text-sm font-semibold",children:[e.jsx(V,{size:16}),"SwapKeeper Dashboard"]})]}),x?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-5",children:[...Array(4)].map((r,d)=>e.jsx("div",{className:"h-36 bg-gray-100 rounded-2xl animate-pulse"},d))}):p?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-4 text-sm",children:p}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-5",children:S.map(({label:r,key:d,icon:z,color:L,bg:M,to:_})=>e.jsx(q,{label:r,value:(o==null?void 0:o[d])??0,icon:z,color:L,bg:M,to:_},d))}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:a?"ðŸ—ºï¸ Nearby Shops â€” Map":"Nearby Shops"}),t&&l&&e.jsxs("p",{className:"text-sm text-gray-400 mt-0.5 flex items-center gap-1",children:[e.jsx(u,{size:12})," ",l]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a&&e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-xl px-3 py-2 text-sm",children:[e.jsx(R,{size:13,className:"text-gray-400"}),e.jsx("select",{value:i,onChange:r=>v(Number(r.target.value)),className:"text-sm font-medium text-gray-700 bg-transparent focus:outline-none cursor-pointer",children:K.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1 gap-1",children:[e.jsxs("button",{onClick:()=>h(!1),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition
                                    ${a?"text-gray-500 hover:text-gray-700":"bg-white text-indigo-700 shadow-sm"}`,children:[e.jsx(O,{size:13})," Grid"]}),e.jsxs("button",{onClick:()=>h(!0),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition
                                    ${a?"bg-white text-indigo-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(T,{size:13})," Map"]})]})]})]}),a?e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"h-[450px] bg-gray-50 rounded-xl flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}),children:t?k?e.jsx("div",{className:"h-[450px] bg-gray-50 rounded-xl flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):e.jsx($,{shops:N,userLocation:t,radius:i}):e.jsxs("div",{className:"h-[450px] bg-gray-50 border border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-3 text-gray-400",children:[e.jsx(u,{size:36,className:"text-gray-300"}),e.jsx("p",{className:"font-medium text-gray-500",children:"Location permission required"}),e.jsx("p",{className:"text-sm text-center px-8",children:"Allow location access in your browser to see nearby shops on the map"})]})}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(n,{to:"/swapkeeper/items",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:shadow-md hover:border-indigo-200 transition-all group",children:[e.jsx("div",{className:"bg-indigo-100 text-indigo-600 p-2 rounded-lg group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Manage Items"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Add, edit or remove items"})]})]}),e.jsxs(n,{to:"/swapkeeper/orders",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:shadow-md hover:border-emerald-200 transition-all group",children:[e.jsx("div",{className:"bg-emerald-100 text-emerald-600 p-2 rounded-lg group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:e.jsx(j,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"View Orders"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Accept or decline requests"})]})]}),e.jsxs(n,{to:"/swapkeeper/profile",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all group",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg group-hover:bg-blue-600 group-hover:text-white transition-colors",children:e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Shop Profile"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Update your store info"})]})]})]})]})]})};export{Y as default};
