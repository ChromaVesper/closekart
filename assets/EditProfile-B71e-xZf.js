import{c as b,g as h,u as y,r,j as e}from"./index-CzVLudNa.js";import{S as j}from"./save-DV6hT0OA.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=b("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),k=()=>{const{user:t}=h(),n=y(),[s,l]=r.useState({name:"",phone:""}),[i,c]=r.useState(!1),[p,d]=r.useState(!1),[u,o]=r.useState("");r.useEffect(()=>{if(!t){n("/login");return}l({name:t.name||"",phone:t.phone||""})},[t]);const g=async a=>{a.preventDefault(),c(!0),o(""),d(!1);try{const m=localStorage.getItem("token"),x=await fetch("https://closekart.onrender.com/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(s)});if(x.ok)d(!0),setTimeout(()=>n("/profile"),1e3);else{const f=await x.json();o(f.msg||"Update failed")}}catch{o("Network error")}c(!1)};return t?e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsxs("button",{onClick:()=>n("/profile"),className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 mb-6 transition",children:[e.jsx(v,{size:18}),e.jsx("span",{children:"Back to Profile"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edit Profile"}),p&&e.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded-lg mb-4 text-sm font-medium",children:"Profile updated successfully! Redirecting..."}),u&&e.jsx("div",{className:"bg-red-100 text-red-600 p-3 rounded-lg mb-4 text-sm font-medium",children:u}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:s.name,onChange:a=>l({...s,name:a.target.value}),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-200 focus:border-blue-500 outline-none transition",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t.email||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:s.phone,onChange:a=>l({...s,phone:a.target.value}),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-200 focus:border-blue-500 outline-none transition",placeholder:"+91 9876543210"})]}),e.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[e.jsx(j,{size:18}),e.jsx("span",{children:i?"Saving...":"Save Changes"})]})]})]})]}):null};export{k as default};
