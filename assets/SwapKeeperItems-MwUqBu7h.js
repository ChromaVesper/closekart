import{r as l,j as e}from"./index-CjyaYRmW.js";import{a as I,d as S,u as C,c as A}from"./swapKeeperApi-Cu5V52h6.js";import{P as E}from"./plus-CV4j3BCZ.js";import{P as z}from"./package-DHN8JVP-.js";import{I as P}from"./image-B_oNavkB.js";import{P as D,T as F}from"./trash-2-hkej5w4U.js";import{X as G}from"./x-I3dpiEVg.js";const T=["General","Electronics","Grocery","Dairy","Fashion","Stationery","Mobile Repair","Books","Furniture","Other"],f={title:"",description:"",category:"General",price:"",stock:"",swapAllowed:!1,status:"active"},_=({status:i})=>e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold
        ${i==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:i}),U=()=>{const[i,d]=l.useState([]),[y,x]=l.useState(!0),[b,n]=l.useState(!1),[c,m]=l.useState(null),[a,r]=l.useState(f),[g,u]=l.useState(!1),[p,o]=l.useState(""),h=()=>{x(!0),I().then(d).catch(()=>o("Failed to load items")).finally(()=>x(!1))};l.useEffect(()=>{h()},[]);const j=()=>{m(null),r(f),o(""),n(!0)},N=t=>{m(t._id),r({title:t.title,description:t.description||"",category:t.category||"General",price:t.price,stock:t.stock,swapAllowed:t.swapAllowed||!1,status:t.status||"active"}),o(""),n(!0)},v=async t=>{if(t.preventDefault(),!a.title||a.price==="")return o("Title and price are required");u(!0),o("");try{const s={...a,price:Number(a.price),stock:Number(a.stock)};c?await C(c,s):await A(s),n(!1),h()}catch{o("Failed to save item")}finally{u(!1)}},w=async t=>{if(window.confirm("Delete this item?"))try{await S(t),d(s=>s.filter(k=>k._id!==t))}catch{alert("Failed to delete item")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Items"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[i.length," items in your store"]})]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-semibold transition-colors shadow-sm",children:[e.jsx(E,{size:18})," Add New Item"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:y?e.jsx("div",{className:"p-8 space-y-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-12 bg-gray-100 rounded-lg animate-pulse"},s))}):i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 gap-3",children:[e.jsx(z,{size:48,className:"text-gray-200"}),e.jsx("p",{className:"font-medium",children:"No items yet"}),e.jsx("p",{className:"text-sm",children:'Click "Add New Item" to get started'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[e.jsx("th",{className:"text-left px-5 py-3.5 font-semibold text-gray-600",children:"Item"}),e.jsx("th",{className:"text-left px-4 py-3.5 font-semibold text-gray-600",children:"Category"}),e.jsx("th",{className:"text-right px-4 py-3.5 font-semibold text-gray-600",children:"Price"}),e.jsx("th",{className:"text-right px-4 py-3.5 font-semibold text-gray-600",children:"Stock"}),e.jsx("th",{className:"text-center px-4 py-3.5 font-semibold text-gray-600",children:"Status"}),e.jsx("th",{className:"text-center px-4 py-3.5 font-semibold text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:i.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-gray-50/60 transition-colors",children:[e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 flex items-center justify-center flex-shrink-0 overflow-hidden",children:(s=t.images)!=null&&s[0]?e.jsx("img",{src:t.images[0],alt:"",className:"w-full h-full object-cover"}):e.jsx(P,{size:18,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:t.title}),t.swapAllowed&&e.jsx("span",{className:"text-xs text-indigo-500 font-medium",children:"Swap allowed"})]})]})}),e.jsx("td",{className:"px-4 py-4 text-gray-600",children:t.category}),e.jsxs("td",{className:"px-4 py-4 text-right font-semibold text-gray-800",children:["₹",t.price.toLocaleString()]}),e.jsx("td",{className:"px-4 py-4 text-right text-gray-600",children:t.stock}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx(_,{status:t.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>N(t),className:"p-1.5 rounded-lg text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors",title:"Edit",children:e.jsx(D,{size:16})}),e.jsx("button",{onClick:()=>w(t._id),className:"p-1.5 rounded-lg text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Delete",children:e.jsx(F,{size:16})})]})})]},t._id)})})]})})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:c?"Edit Item":"Add New Item"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(G,{size:20})})]}),e.jsxs("form",{onSubmit:v,className:"px-6 py-5 space-y-4",children:[p&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 rounded-lg px-3 py-2",children:p}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>r(s=>({...s,title:t.target.value})),placeholder:"Item name",className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>r(s=>({...s,description:t.target.value})),placeholder:"Describe your item...",rows:3,className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{value:a.category,onChange:t=>r(s=>({...s,category:t.target.value})),className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400",children:T.map(t=>e.jsx("option",{children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>r(s=>({...s,status:t.target.value})),className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (₹) *"}),e.jsx("input",{type:"number",min:"0",value:a.price,onChange:t=>r(s=>({...s,price:t.target.value})),placeholder:"0",className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),e.jsx("input",{type:"number",min:"0",value:a.stock,onChange:t=>r(s=>({...s,stock:t.target.value})),placeholder:"0",className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.swapAllowed,onChange:t=>r(s=>({...s,swapAllowed:t.target.checked})),className:"w-4 h-4 rounded border-gray-300 text-indigo-600"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Allow swap offers"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 border border-gray-200 text-gray-600 py-2.5 rounded-xl text-sm font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-60 text-white py-2.5 rounded-xl text-sm font-semibold transition-colors",children:g?"Saving...":c?"Update Item":"Add Item"})]})]})]})})]})};export{U as default};
