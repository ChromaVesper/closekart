const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapPicker-ByP_mqaH.js","assets/index-bXu-IJ1o.js","assets/index--MAyHE7_.css","assets/TileLayer-w6vNFlQX.js","assets/loader-TYWKbkAN.js","assets/x-C1i6LoYX.js","assets/navigation-By_bOCw-.js","assets/check-Bhblgrjp.js"])))=>i.map(i=>d[i]);
import{c as x,u as k,r as t,j as e,M as w,h as L,_ as P,d as z}from"./index-bXu-IJ1o.js";import{P as C}from"./package-SEHdQNkc.js";import{C as b}from"./check-circle-BaQKNroG.js";import{P as M}from"./plus-gURrqtvH.js";import{M as _}from"./map-CMI2js8q.js";import{L as E}from"./loader-TYWKbkAN.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=x("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=x("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=x("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),$=t.lazy(()=>P(()=>import("./MapPicker-ByP_mqaH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),H=()=>{const j=k(),[m,y]=t.useState([{id:1,name:"Amul Milk 1L",price:54,stock:50,category:"Dairy"},{id:2,name:"Basmati Rice 1kg",price:120,stock:20,category:"Grocery"}]),[a,o]=t.useState("products"),[l,n]=t.useState(null),[A,h]=t.useState(!1),[p,i]=t.useState(!1),[g,f]=t.useState(""),N=s=>y(m.filter(r=>r.id!==s)),v=async({label:s,fullAddress:r,latitude:c,longitude:d})=>{h(!0),f("");try{await z.put("/shops/my-location",{latitude:c,longitude:d,address:r}),n({lat:c,lng:d,address:r}),i(!0)}catch(S){console.error("Save shop location error:",S),n({lat:c,lng:d,address:r}),i(!0)}finally{h(!1)}};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 hidden md:flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600",children:"ShopAdmin"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Manage your store"})]}),e.jsxs("nav",{className:"mt-4 px-4 space-y-1 flex-1",children:[e.jsxs("button",{onClick:()=>o("products"),className:`w-full flex items-center px-4 py-3 rounded-xl text-sm font-semibold gap-3 transition ${a==="products"?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(C,{size:18})," Products"]}),e.jsxs("button",{onClick:()=>o("location"),className:`w-full flex items-center px-4 py-3 rounded-xl text-sm font-semibold gap-3 transition ${a==="location"?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(w,{size:18}),"Shop Location",p&&e.jsx(b,{size:15,className:"text-green-500 ml-auto"})]}),e.jsxs("button",{onClick:()=>o("settings"),className:`w-full flex items-center px-4 py-3 rounded-xl text-sm font-semibold gap-3 transition ${a==="settings"?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(u,{size:18})," Settings"]})]}),e.jsx("div",{className:"p-4 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>j("/"),className:"w-full flex items-center px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-xl text-sm gap-3",children:[e.jsx(L,{size:18})," Back to Site"]})})]}),e.jsxs("main",{className:"flex-1 p-6 md:p-8 overflow-auto",children:[a==="products"&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Product Management"}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-xl flex items-center hover:bg-blue-700 transition text-sm font-semibold gap-2",children:[e.jsx(M,{size:18})," Add Product"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-50 text-gray-500 text-xs uppercase tracking-wider",children:["Product Name","Category","Price","Stock","Actions"].map(s=>e.jsx("th",{className:`p-4 border-b ${s==="Actions"?"text-right":""}`,children:s},s))})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b last:border-0 text-sm",children:[e.jsx("td",{className:"p-4 font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"p-4 text-gray-500",children:s.category}),e.jsxs("td",{className:"p-4 font-medium",children:["₹",s.price]}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.stock>10?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[s.stock," in stock"]})}),e.jsxs("td",{className:"p-4 text-right space-x-2",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700",children:e.jsx(D,{size:17})}),e.jsx("button",{onClick:()=>N(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(V,{size:17})})]})]},s.id))})]})})]}),a==="location"&&e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(_,{size:24,className:"text-blue-600"}),"Set Shop Location"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Your exact shop position determines which customers can see your store. Only buyers within your delivery radius will see you."})]}),p&&l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4 bg-green-50 border border-green-200 rounded-2xl p-5",children:[e.jsx(b,{size:28,className:"text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-800 text-base",children:"Shop location saved ✓"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:l.address}),e.jsxs("p",{className:"text-xs text-green-600 mt-1 font-mono",children:[l.lat.toFixed(5),", ",l.lng.toFixed(5)]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 text-xs text-amber-800",children:[e.jsx("strong",{children:"Note:"})," Shop location is permanent once confirmed. Contact support to update it after initial setup."]}),e.jsx("button",{onClick:()=>{i(!1),n(null)},className:"text-sm text-blue-600 hover:underline",children:"← Change location"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4 text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Drag the pin to your exact shop entrance. Buyers within "," ",e.jsx("span",{className:"font-bold",children:"5 km"})," (default delivery radius) will see your shop in search results."]}),g&&e.jsx("p",{className:"text-sm text-red-500 mb-3",children:g}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"h-[480px] bg-gray-100 rounded-2xl flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-gray-400",children:[e.jsx(E,{size:28,className:"animate-spin"}),e.jsx("span",{className:"text-sm",children:"Loading map…"})]})}),children:e.jsx($,{showLabelPicker:!1,saveLabel:"Confirm Shop Location",onSave:v})})]})]}),a==="settings"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 gap-3",children:[e.jsx(u,{size:40,className:"text-gray-200"}),e.jsx("p",{className:"font-medium text-gray-500",children:"Shop Settings"}),e.jsx("p",{className:"text-sm",children:"Coming soon"})]})]})]})};export{H as default};
