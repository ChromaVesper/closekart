const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ShopMap-BEnU4yCJ.js","assets/index-1TJcLd-J.js","assets/index--MAyHE7_.css","assets/TileLayer-BM_d0Fk3.js"])))=>i.map(i=>d[i]);
import{c as f,g as O,a as P,r as s,d as E,j as e,n as j,M as y,s as I,L as c,_ as U}from"./index-1TJcLd-J.js";import{g as R}from"./swapKeeperApi-CXdpvPI3.js";import{P as g}from"./package-Ctm8ccLJ.js";import{C as T}from"./clock-CMHFrn7f.js";import{C as D}from"./check-circle-CH6YNDbQ.js";import{S as V}from"./sliders-horizontal-DhuPOOcr.js";import{M as $}from"./map-CFHZ8ue6.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=f("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),G=s.lazy(()=>U(()=>import("./ShopMap-BEnU4yCJ.js"),__vite__mapDeps([0,1,2,3]))),H=[{label:"1 km",value:1e3},{label:"3 km",value:3e3},{label:"5 km",value:5e3},{label:"10 km",value:1e4},{label:"20 km",value:2e4}],B=({label:o,value:t,icon:i,color:l,bg:x,to:m})=>e.jsxs(c,{to:m,className:"group relative flex flex-col justify-between p-6 rounded-2xl shadow-sm border border-gray-100 bg-white hover:shadow-md transition-all overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${x} ${l} p-3 rounded-xl`,children:e.jsx(i,{size:22})}),e.jsx("span",{className:"text-gray-400 group-hover:text-indigo-500 transition-colors",children:e.jsx(K,{size:18})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:t}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:o})]})]}),ee=()=>{var u;const{user:o}=O(),{coords:t,locationName:i}=P(),[l,x]=s.useState(null),[m,v]=s.useState(!0),[p,N]=s.useState(null),[a,h]=s.useState(!1),[d,w]=s.useState(5e3),[k,S]=s.useState([]),[z,b]=s.useState(!1);s.useEffect(()=>{R().then(x).catch(()=>N("Failed to load dashboard")).finally(()=>v(!1))},[]),s.useEffect(()=>{!a||!t||(b(!0),E.get("/shops",{params:{lat:t.latitude,lng:t.longitude,radius:d}}).then(r=>S(r.data)).catch(console.error).finally(()=>b(!1)))},[a,t,d]);const L=[{label:"Total Items",key:"totalItems",icon:g,color:"text-indigo-600",bg:"bg-indigo-100/80",to:"/swapkeeper/items"},{label:"Total Orders",key:"totalOrders",icon:j,color:"text-emerald-600",bg:"bg-emerald-100/80",to:"/swapkeeper/orders"},{label:"Pending Orders",key:"pendingOrders",icon:T,color:"text-amber-600",bg:"bg-amber-100/80",to:"/swapkeeper/orders"},{label:"Accepted",key:"acceptedOrders",icon:D,color:"text-blue-600",bg:"bg-blue-100/80",to:"/swapkeeper/orders"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",((u=o==null?void 0:o.name)==null?void 0:u.split(" ")[0])||"Keeper"," ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Here's what's happening with your store today."})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-indigo-50 border border-indigo-100 text-indigo-700 px-4 py-2 rounded-xl text-sm font-semibold",children:[e.jsx(q,{size:16}),"SwapKeeper Dashboard"]})]}),m?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-5",children:[...Array(4)].map((r,n)=>e.jsx("div",{className:"h-36 bg-gray-100 rounded-2xl animate-pulse"},n))}):p?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-4 text-sm",children:p}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-5",children:L.map(({label:r,key:n,icon:M,color:A,bg:_,to:C})=>e.jsx(B,{label:r,value:(l==null?void 0:l[n])??0,icon:M,color:A,bg:_,to:C},n))}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:a?"ðŸ—ºï¸ Nearby Shops â€” Map":"Nearby Shops"}),t&&i&&e.jsxs("p",{className:"text-sm text-gray-400 mt-0.5 flex items-center gap-1",children:[e.jsx(y,{size:12})," ",i]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a&&e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-xl px-3 py-2 text-sm",children:[e.jsx(V,{size:13,className:"text-gray-400"}),e.jsx("select",{value:d,onChange:r=>w(Number(r.target.value)),className:"text-sm font-medium text-gray-700 bg-transparent focus:outline-none cursor-pointer",children:H.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1 gap-1",children:[e.jsxs("button",{onClick:()=>h(!1),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition
                                    ${a?"text-gray-500 hover:text-gray-700":"bg-white text-indigo-700 shadow-sm"}`,children:[e.jsx(I,{size:13})," Grid"]}),e.jsxs("button",{onClick:()=>h(!0),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition
                                    ${a?"bg-white text-indigo-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx($,{size:13})," Map"]})]})]})]}),a?e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"h-[450px] bg-gray-50 rounded-xl flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}),children:t?z?e.jsx("div",{className:"h-[450px] bg-gray-50 rounded-xl flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):e.jsx(G,{shops:k,userLocation:t,radius:d}):e.jsxs("div",{className:"h-[450px] bg-gray-50 border border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-3 text-gray-400",children:[e.jsx(y,{size:36,className:"text-gray-300"}),e.jsx("p",{className:"font-medium text-gray-500",children:"Location permission required"}),e.jsx("p",{className:"text-sm text-center px-8",children:"Allow location access in your browser to see nearby shops on the map"})]})}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(c,{to:"/swapkeeper/items",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:shadow-md hover:border-indigo-200 transition-all group",children:[e.jsx("div",{className:"bg-indigo-100 text-indigo-600 p-2 rounded-lg group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Manage Items"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Add, edit or remove items"})]})]}),e.jsxs(c,{to:"/swapkeeper/orders",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:shadow-md hover:border-emerald-200 transition-all group",children:[e.jsx("div",{className:"bg-emerald-100 text-emerald-600 p-2 rounded-lg group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:e.jsx(j,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"View Orders"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Accept or decline requests"})]})]}),e.jsxs(c,{to:"/swapkeeper/profile",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all group",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg group-hover:bg-blue-600 group-hover:text-white transition-colors",children:e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Shop Profile"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Update your store info"})]})]})]})]})]})};export{ee as default};
