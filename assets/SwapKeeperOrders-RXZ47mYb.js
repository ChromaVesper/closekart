import{c as w,r,j as e}from"./index-CJZPd7eW.js";import{b as I,e as S,f as C}from"./swapKeeperApi-DxcJuw2G.js";import{S as k}from"./shopping-bag-DAhdR1At.js";import{P as O}from"./package-CGgm7gsi.js";import{C as d}from"./check-circle-D3qZXC6e.js";import{C as _}from"./clock-bbHbn8Vw.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=w("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),f={pending:{label:"Pending",color:"bg-amber-100 text-amber-700",icon:_},accepted:{label:"Accepted",color:"bg-green-100 text-green-700",icon:d},declined:{label:"Declined",color:"bg-red-100 text-red-700",icon:b},completed:{label:"Completed",color:"bg-blue-100 text-blue-700",icon:d}},A=({status:c})=>{const l=f[c]||f.pending,n=l.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${l.color}`,children:[e.jsx(n,{size:12})," ",l.label]})},P=()=>{const[c,l]=r.useState([]),[n,o]=r.useState(!0),[x,j]=r.useState(""),[m,i]=r.useState(null),u=()=>{o(!0),I().then(l).catch(()=>j("Failed to load orders")).finally(()=>o(!1))};r.useEffect(()=>{u()},[]);const N=async t=>{i(t);try{await S(t),l(a=>a.map(s=>s._id===t?{...s,status:"accepted"}:s))}catch{alert("Failed to accept order")}finally{i(null)}},v=async t=>{if(window.confirm("Decline this order?")){i(t);try{await C(t),l(a=>a.map(s=>s._id===t?{...s,status:"declined"}:s))}catch{alert("Failed to decline order")}finally{i(null)}}},p=c.filter(t=>t.status==="pending").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[c.length," total orders",p>0&&e.jsxs("span",{className:"ml-2 text-amber-600 font-semibold",children:["· ",p," pending action"]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n?e.jsx("div",{className:"p-8 space-y-4",children:[...Array(3)].map((t,a)=>e.jsx("div",{className:"h-16 bg-gray-100 rounded-lg animate-pulse"},a))}):x?e.jsx("div",{className:"p-6 text-sm text-red-600 bg-red-50",children:x}):c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 gap-3",children:[e.jsx(k,{size:48,className:"text-gray-200"}),e.jsx("p",{className:"font-medium",children:"No orders yet"}),e.jsx("p",{className:"text-sm",children:"Orders will appear here when customers place them"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[e.jsx("th",{className:"text-left px-5 py-3.5 font-semibold text-gray-600",children:"Item"}),e.jsx("th",{className:"text-left px-4 py-3.5 font-semibold text-gray-600",children:"Buyer"}),e.jsx("th",{className:"text-center px-4 py-3.5 font-semibold text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-3.5 font-semibold text-gray-600",children:"Date"}),e.jsx("th",{className:"text-center px-4 py-3.5 font-semibold text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:c.map(t=>{var a,s,h,g,y;return e.jsxs("tr",{className:"hover:bg-gray-50/60 transition-colors",children:[e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-indigo-50 flex items-center justify-center flex-shrink-0",children:e.jsx(O,{size:16,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:((a=t.itemId)==null?void 0:a.title)||"Deleted Item"}),((s=t.itemId)==null?void 0:s.price)&&e.jsxs("p",{className:"text-xs text-gray-400",children:["₹",t.itemId.price.toLocaleString()]})]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("p",{className:"font-medium text-gray-700",children:((h=t.buyerId)==null?void 0:h.name)||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-400",children:((g=t.buyerId)==null?void 0:g.email)||((y=t.buyerId)==null?void 0:y.phone)||""})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx(A,{status:t.status})}),e.jsx("td",{className:"px-4 py-4 text-gray-500 text-xs",children:new Date(t.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-4 py-4",children:t.status==="pending"?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>N(t._id),disabled:m===t._id,className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white text-xs font-semibold rounded-lg transition-colors",children:[e.jsx(d,{size:13})," Accept"]}),e.jsxs("button",{onClick:()=>v(t._id),disabled:m===t._id,className:"flex items-center gap-1 px-3 py-1.5 bg-red-100 hover:bg-red-200 disabled:opacity-50 text-red-600 text-xs font-semibold rounded-lg transition-colors",children:[e.jsx(b,{size:13})," Decline"]})]}):e.jsx("p",{className:"text-center text-xs text-gray-400 italic",children:"No action needed"})})]},t._id)})})]})})})]})};export{P as default};
